# EdenForge 업데이트 내역

## 2025-01-XX - 프로젝트 초기 설정

### 추가된 파일들
- `package.json`: 프로젝트 의존성 및 스크립트 정의
- `vite.config.ts`: Vite 빌드 설정
- `tsconfig.json`, `tsconfig.node.json`: TypeScript 설정
- `public/index.html`, `index.html`: HTML 진입점
- `src/types/index.ts`: 핵심 TypeScript 인터페이스 정의 (로그 시스템, 액션 타입, 파벌 시스템 추가)
- `src/core/utils/index.ts`: 유틸리티 함수들 (RNG, 벡터 연산, 수학 함수)
- `src/core/utils/logger.ts`: 로그 시스템 유틸리티
- `src/core/world.ts`: 월드 시스템 핵심 로직 (엔티티 시스템, 파벌 시스템 통합)
- `src/core/material.ts`: 재료 시스템 (조합, 발견)
- `src/core/entity.ts`: 고도화된 엔티티 시스템 (Stim/욕구 기반 AI)
- `src/core/combat.ts`: 전투 시스템 (무기/방어구, 전투 스킬)
- `src/core/faction.ts`: 파벌 시스템 (파벌 관리, 관계, 전투)
- `src/core/genetics.ts`: 유전 시스템 (유전자 전달, 돌연변이, 특성)
- `src/core/learning.ts`: 학습 시스템 (경험 기반 학습, 가르치기)
- `src/core/ecosystem.ts`: 생태계 시스템 (동물/식물, Pulse, 바이옴)
- `src/main.tsx`: React 앱 진입점
- `src/App.tsx`: 메인 App 컴포넌트 (통합 패널, 파벌 패널, 유전 패널, 생태계 패널 추가)
- `src/components/CanvasLayer.tsx`: 캔버스 렌더링 컴포넌트 (파벌 색상 구분, 동물/식물/Pulse 렌더링)
- `src/components/HUD.tsx`: 게임 HUD 컴포넌트
- `src/components/LogPanel.tsx`: 실시간 로그 표시 패널
- `src/components/UnifiedPanel.tsx`: 통합 패널 (재료/엔티티 탭, 검색/필터링)
- `src/components/FactionPanel.tsx`: 파벌 관리 패널 (파벌 정보, 멤버, 관계, 통계)
- `src/components/GeneticsPanel.tsx`: 유전 관리 패널 (유전 특성, 학습 경험, 스킬)
- `src/components/EcosystemPanel.tsx`: 생태계 관리 패널 (동물/식물 정보, Pulse, 바이옴)
- `src/components/DraggablePanel.tsx`: 드래그 가능한 패널 컴포넌트 (상단바 드래그, 닫기 버튼)
- `src/components/TabManager.tsx`: 하단 탭 관리 컴포넌트 (5개 패널 관리)
- `src/core/emotion.ts`: 감정 시스템 (감정 상태 계산, 이모지 말풍선)
- `src/styles/index.css`: 기본 CSS 스타일
- `src/styles/App.css`: App 컴포넌트 전용 스타일 (드래그 패널, 탭 바, 패널 스타일 추가)
- `README.md`: 프로젝트 문서

### 구현된 기능
1. **기본 프로젝트 구조**: Vite + React + TypeScript 설정
2. **월드 시스템**: 엔티티 생성, 기본 AI 행동 (Gather, Rest, Move)
3. **캔버스 렌더링**: 엔티티를 색상별로 표시, HP 상태 표시
4. **HUD**: 엔티티 수, Tick, 일시정지/재생, 속도 조절
5. **타입 시스템**: Entity, Material, WorldState 등 핵심 타입 정의
6. **유틸리티**: RNG, 벡터 연산, 수학 함수들
7. **로그 시스템**: 실시간 게임 이벤트 로깅 및 표시
8. **재료 시스템**: 기본 재료 + 자동 조합 시스템
9. **재료 도감**: 발견된 재료들을 티어별로 표시
10. **통합 패널**: 재료와 엔티티 정보를 탭으로 구분, 검색/필터링 기능
11. **고도화된 엔티티 시스템**: Stim/욕구 기반 AI 의사결정
12. **다양한 행동**: Gather, Eat, Rest, Move, Craft, Build, Research, Social, Trade, Mate
13. **학습 시스템**: 행동에 따른 스킬 향상 및 성향 변화
14. **사망 시스템**: HP, 배고픔, 나이에 따른 사망 처리
15. **전투 시스템**: 엔티티 간 전투, 무기/방어구 시스템, 전투 스킬
16. **파벌 시스템**: 파벌 생성/관리, 멤버 관리, 파벌 간 관계, 전투
17. **파벌 UI**: 파벌 정보 표시, 멤버 목록, 관계 표시, 통계
18. **파벌 렌더링**: 캔버스에서 파벌별 색상 구분, 리더 표시
19. **유전 시스템**: 유전자 전달, 돌연변이, 유전 특성, 세대 간 전승
20. **학습 시스템**: 경험 기반 학습, 가르치기, 스킬 향상, 지식 획득
21. **유전 UI**: 유전 특성, 학습 경험, 스킬 수준, 후성유전 표시
22. **생태계 시스템**: 동물/식물 시스템, Pulse 시스템, 포식/경쟁 관계
23. **생태계 UI**: 동물/식물 정보, Pulse 상태, 바이옴 정보 표시
24. **생태계 렌더링**: 캔버스에서 동물/식물/Pulse 시각화
25. **드래그 가능한 패널 시스템**: 상단바 드래그, 우상단 닫기 버튼
26. **하단 탭 관리 시스템**: 5개 패널을 하단 탭으로 관리
27. **감정 시스템**: 엔티티 감정 상태 계산, 이모지 말풍선 생성
28. **이모지 말풍선 렌더링**: 행동/감정/생각/대화 말풍선 시각화
29. **상세 모달 시스템**: 엔티티/물질/파벌/동물/식물 상세 정보 표시
30. **패널 드래그 기능 개선**: 실시간 위치 업데이트 및 저장
31. **말풍선 시스템 최적화**: 상호작용 시에만 말풍선 표시
32. **성능 최적화**: 말풍선 생성 제한, 렌더링 최적화, 틱 속도 조정
33. **UI/UX 개선**: 통합 패널 드래그 수정, 속도 조정, 로그 시스템 개선
34. **통계 시스템**: 상세 통계 패널 구현, 소수점 두 자리 표시
35. **GitHub Pages 배포**: 자동 배포 설정, 라이브 데모 준비
36. **패널 크기 확장**: 모든 패널을 500x600으로 확장
37. **통계 패널 개선**: 6개 탭으로 구분된 상세 통계 시스템
38. **엔티티 시스템 문서화**: docs/ENTITY_SYSTEMS.md 상세 문서 작성
39. **로그 패널 개선**: 필터링 기능, 검색 기능, 카테고리별 분류 추가
40. **차트 시스템 구현**: recharts 라이브러리로 6가지 차트 유형 구현
41. **생태계 상호작용 개선**: 스탯/스킬/지식 기반 상호작용, 식물 수 제한
42. **맵 컨트롤 시스템**: 드래그/확대/축소, 패딩, 컨트롤 버튼 추가
43. **엔티티 사망 시스템 개선**: 상세한 사망 로그 추가
44. **생태계 포식 시스템 확장**: 인간-동물-식물 간 포식 관계, 식물 수 제한 제거, 적극적 섭취 시스템
45. **로그 시스템 개선**: 분류별 로그 제한 (각 분류당 1000개), 전체 로그 제한 (5000개)
46. **엔티티 이름 시스템 개선**: 랜덤 알파벳/숫자/특수문자 조합 이름 생성, 종족별 접두사/접미사 적용
47. **파벌 시스템 대폭 개선**: 랜덤 파벌 이름 생성, 파벌 간 상호작용(전쟁/거래/동맹), 흥망성쇠 시스템, 새로운 파벌 자동 생성
48. **통계 시스템 개선**: 인구 변화를 시간순 점선 그래프로 표시, 재료 시스템 동적 티어 지원(상위 8개 티어), 통합 패널 필터링 동적 티어 지원
49. **파벌 시스템 버그 수정**: 기술력 NaN 문제 해결, 인구수 0일 때 파벌 자동 삭제, 엔티티 상세 정보 스탯 소수점 2자리 표시
50. **유전 탭 대폭 개선**: 가족 트리 시각화, 선조 데이터 추이 그래프, 세대별 특성 분포 차트, 부모-자식 관계 추적 시스템
51. **로그 시스템 개선**: 각 카테고리별로 1000개씩 독립적으로 보관, 카테고리별 로그 수 표시, 실시간 로그 통계
52. **인구 그래프 개선**: 시간 범위 선택 기능 (50/100/200/500/1000 틱), 기본값 100 틱으로 증가, 실시간 데이터 포인트 수 표시
53. **플로팅 패널 시스템**: 드래그 가능한 게임 정보 패널, 말풍선 필터링 패널, 우하단 토글 버튼, 패널 겹침 방지
54. **플로팅 패널 개선**: 드래그 기능 수정, 게임 정보 패널 크기 확대, 말풍선 필터 검색 기능 및 적용 버튼 추가
55. **감정 시스템 대폭 확장**: 6개에서 22개 감정으로 확장 (행복, 공포, 분노, 호기심, 만족, 스트레스, 흥미, 슬픔, 불안, 기쁨, 좌절, 자부심, 외로움, 희망, 절망, 평온, 짜증, 감사, 질투, 자신감, 혼란, 의지), 세밀한 감정 계산 로직 구현
56. **UI 투명도 문제 수정**: 드롭다운 메뉴, 검색 입력 필드, 선택지들의 배경색을 `#2a2a2a`로 변경하고 테두리를 `#4ecdc4`로 개선하여 가시성 향상
57. **말풍선 필터링 및 로그 시스템 개선**: 말풍선 필터링 기능 완전 구현, 전투/유전 활동 확률 증가 (전투 10%, 교배 15%), 엔티티 간 호환성 계산 시스템 추가
58. **GitHub Pages 배포 완료**: 자동 배포 시스템 구축, TypeScript 컴파일 오류 수정, 라이브 데모 URL 제공
59. **엔티티 생명주기 로그 시스템 대폭 개선**: 엔티티 탄생/사망/제거에 대한 상세한 로그 추가, 사망 원인별 분류 (HP 부족, 극심한 배고픔, 노화, 전투), 전투 사망 시 공격자/무기/데미지 정보 포함, 동물/식물 생명주기 로그도 개선
60. **오류 수정 및 안정성 개선**: entity.ts의 undefined 오류 수정, ChartsPanel의 함수 초기화 순서 문제 해결, 안전한 배열 접근 처리 추가
61. **GitHub Pages SPA 라우팅 수정**: 404.html 파일 추가, SPA 라우팅 스크립트 구현, GitHub Actions 워크플로우 업데이트
62. **GitHub Pages 권한 및 배포 문제 해결**: GitHub Actions 권한 설정 추가, force_orphan 옵션 추가, SPA 라우팅 파일 재생성
63. **패널 크기 동적 조정 시스템**: 각 패널의 크기를 드래그로 동적으로 조정 가능, 크기 정보를 로컬 스토리지에 저장하여 재시작 시 복원, 8방향 리사이즈 핸들 구현 (상/하/좌/우/좌상/우상/좌하/우하), 최소/최대 크기 제한 설정
64. **Vite HMR 구문 오류 수정**: faction.ts의 복잡한 함수 호출을 별도 변수로 분리하여 Vite HMR 관련 구문 오류 해결, 코드 가독성 및 안정성 향상
65. **초기 엔티티 생성 수 대폭 증가**: 인간 24명 → 50명, 동물 비율 0.8 → 1.5, 식물 비율 0.5 → 1.0으로 증가, 하드코딩된 비율을 파라미터 시스템으로 변경하여 총 175개 엔티티 생성 (인간 50명, 동물 75마리, 식물 50개)
66. **펄스 시스템 대폭 개선**: 펄스 과도 생성 및 변형 문제 해결, 생성 확률 2%로 제한, 조건 강화 (fear > 0.8, threat > 0.8), 수명 단축 (20/15틱), 제거 조건 강화, 공포도 자연 감소 로직 추가
67. **펄스 시스템 현실적 개선**: 확률적 생성에서 실제 상황별 생성으로 변경, 사냥 실패/경쟁 패배/식물 섭취 시 펄스 생성, 그래픽 표시 제거로 성능 향상
68. **인간 사망 시스템 대폭 강화**: 동물 공격 성공률 75%로 증가, 파벌 전투 데미지 2배 증가, 상호작용 거리 확대, 파벌 전투 빈도 5배 증가로 인간 생존이 더욱 도전적
69. **초기 엔티티 생성 디버깅**: React Strict Mode 중복 초기화 방지, 파라미터 기반 엔티티 생성 과정 추적 로그 추가, 실제 생성된 엔티티 수 확인 기능 구현
64. **일시정지 버그 수정**: 게임 일시정지/재개 시 인간 생성 문제 해결, 초기 월드 생성과 게임 루프를 분리하여 재시작 시 중복 생성 방지
65. **데이터 편집 패널 시스템**: 엔티티, 동물, 식물, 재료, 파벌 데이터를 수정/생성할 수 있는 편집 패널 구현, 5개 탭으로 구분된 편집 인터페이스, 실시간 데이터 수정 및 생성 기능
66. **설정 패널 시스템**: 게임 저장/불러오기, 새로하기, 설정 초기화 기능을 포함한 설정 패널 구현, 4개 탭으로 구분된 설정 인터페이스 (게임/화면/성능/데이터), 확인 모달 시스템, 로컬 스토리지를 통한 게임 상태 저장/복원
67. **초기 생태계 개선**: 게임 시작 시 인간들이 먹을거를 찾을 수 있도록 약한 동물(토끼, 사슴)과 식물(풀, 꽃, 덤불)을 적당히 스폰, 동물 생성 확률 1%, 식물 생성 확률 2%로 증가, 약한 동물 위주로 생성하여 인간의 생존률 향상
68. **편집 패널 확장**: 모든 엔티티, 동물, 식물, 재료, 파벌의 모든 속성을 수정할 수 있도록 편집 폼 확장, 섹션별로 구분된 폼 레이아웃 (기본 정보/스탯/스킬/유전자/후성유전/특성), 그리드 레이아웃으로 정리된 입력 필드들
69. **식물 생성 조정**: 식물 과다 생성 문제 해결, 초기 생성량 150% → 50%로 감소, 지속적 생성 확률 2% → 0.5%로 감소, 번식 확률 1% → 0.2%로 감소, 사망 조건 강화 (나이 200 → 100, 성숙 후 자연사 추가), 밀도 제한으로 번식 제어, 동물/인간의 식물 소비 확률 증가
70. **모달 중복 문제 해결**: 통합패널에서 재료/엔티티 클릭 시 모달이 두 개 열리는 문제 수정, UnifiedPanel의 자체 모달 제거하고 TabManager의 중앙 집중식 모달 관리로 통일
71. **파라미터 시스템 구축**: 모든 게임 변수들을 체계적으로 관리할 수 있는 파라미터 시스템 구축, 9개 카테고리(엔티티/동물/식물/재료/파벌/생태계/월드/유전/학습)별로 분류된 파라미터 관리, 실시간 편집 가능한 UI 패널, 저장/불러오기/내보내기/가져오기 기능, 검색 및 필터링 기능
72. **편집 패널 UX 개선**: 편집 패널에서 X 버튼이 없어서 다른 탭으로 이동할 수 없던 문제 해결, 뒤로가기 버튼 추가, 편집 폼 스크롤 가능하게 수정, 내부 패널 레이아웃 개선
73. **맵 클릭 말풍선 시스템**: 맵에서 엔티티/동물/식물을 클릭하면 해당 객체의 정보를 보여주는 말풍선 시스템 구현, 클릭한 객체의 이름, 종족, HP, 나이, 파벌 등의 기본 정보 표시, 5픽셀 반경 내 클릭 감지, 드래그 중에는 클릭 무시, 말풍선은 클릭한 위치에 고정되어 표시
74. **엔티티 생존 시스템 대폭 개선**: 초반 엔티티 사망 문제 해결을 위한 종합적인 밸런싱 패치, 배고픔 증가 속도 0.1 → 0.05로 감소, Gather 시스템을 실제 식물과 연결하여 더 효과적인 음식 채집, 생태계 상호작용 확률 40% → 80%로 증가, 식물 섭취량 및 배고픔 감소 효과 증가, survival 욕구 계산에 배고픔 요소 추가, 배고픔이 높을 때 Gather 행동 우선 선택 (70% 확률), 엔티티 파라미터에서 배고픔 증가 속도 0.5 → 0.05로 대폭 감소
75. **사망 이유 추이 차트 시스템**: 통계 패널의 차트 탭에 사망 이유 추이 차트 추가, 시간순으로 HP 부족/극심한 배고픔/노화/전투 사망 이유를 선 그래프로 표시, 게임 틱을 기준으로 한 시간 슬롯 분류, 로그 시스템에서 사망 관련 로그 추출 및 분석, 4가지 사망 이유별 색상 구분 (빨강/노랑/청록/연두), 시간 범위 선택 기능 (50/100/200/500/1000 틱), 인구 추이 차트와 동일한 UI/UX 패턴 적용
76. **엔티티 식량 수급 시스템 대폭 개선**: 초반 엔티티 사망 문제 해결을 위한 종합적인 식량 수급 시스템 개선, 사냥 성공 시 인벤토리에 식량 아이템 추가 (5-15개), 사냥 성공 확률 개선 (기본 60% + 스킬 보너스), 전투 시스템과 생태계 시스템 연결, 배고픔이 높을 때 전투 확률 증가 (15-35%), 배고픔이 높을 때 Eat 행동 우선 선택 (80% 확률), 초기 동물/식물 생성량 대폭 증가 (동물 200%, 식물 300%), 지속적 동물/식물 생성 확률 증가 (동물 5%, 식물 3%), 사냥 성공 시 경험치 및 스킬 향상
77. **사냥 로그 분류 시스템**: 사냥과 포식 관련 로그를 별도의 'hunting' 카테고리로 분류, 로그 타입에 'hunting' 카테고리 추가, 생태계 시스템의 사냥 성공/실패 로그를 'hunting' 카테고리로 변경, 전투 시스템의 사냥 관련 로그를 'hunting' 카테고리로 변경, 엔티티 시스템의 사냥 관련 로그를 'hunting' 카테고리로 변경, 로그 패널에 'hunting' 카테고리 필터 추가 (🏹 아이콘), 카테고리별 로그 수 표시에 'hunting' 포함, 사냥 관련 로그를 독립적으로 필터링하여 확인 가능
78. **엔티티 기반 재료 발견 시스템**: 자동 재료 조합 제거하고 엔티티의 연구와 제작을 통해서만 재료 발견하도록 변경, MaterialSystem에 엔티티 기반 재료 조합 메서드 추가 (분석/제작 스킬에 따른 조합 확률), 엔티티의 연구 액션에서 재료 발견 시도 (분석 스킬 150당 40% 확률), 엔티티의 제작 액션에서도 재료 발견 시도 (제작 스킬 200당 30% 확률), 엔티티의 욕구 계산에서 지능과 분석 스킬에 따른 호기심 욕구 강화, 엔티티의 행동 결정에서 호기심 욕구가 높을 때 연구 액션 우선 선택 (60% 확률), 엔티티의 초기 스킬 범위 확대 (분석/제작 10-50), 엔티티의 유전자 범위 조정 (호기심 0.1-0.9, 명예욕 0.1-0.8), 연구/제작 성공 시 해당 스킬 향상, 재료 발견 시 상세한 로그 기록
79. **파라미터화 시스템 대폭 확장**: 엔티티 파라미터에 연구/제작/욕구/행동 결정 관련 파라미터 20개 추가, 재료 파라미터에 조합/연구 기반 조합 관련 파라미터 12개 추가, 엔티티 시스템의 모든 하드코딩된 값들을 파라미터로 변경 (스태미나 소모, 성공률, 스킬 향상량, 욕구 계산, 행동 결정 확률), MaterialSystem의 조합 관련 값들을 파라미터로 변경 (조합 임계값, 랜덤 요소, 속성 변이), 월드 시스템의 엔티티 생성 시 파라미터 사용 (초기 스탯/스킬 범위, 기본값), utils의 calculateStim 함수에서 파라미터 사용 (호기심 계산), 모든 시스템이 파라미터 매니저를 통해 설정 가능하도록 변경
80. **프로젝트 문서화 시스템 구축**: docs 폴더에 상세한 문서화 시스템 구축, PROJECT_STRUCTURE.md로 프로젝트 전체 구조 설명, ENTITIES/ENTITY_SYSTEM.md로 엔티티 시스템 상세 문서화 (AI 의사결정, 행동 실행, 생존 시스템, 스킬 시스템, 유전 시스템), ECOSYSTEM/ECOSYSTEM_SYSTEM.md로 생태계 시스템 상세 문서화 (식물 시스템, 동물 시스템, 포식 시스템, Pulse 시스템), SYSTEMS/MATERIAL_SYSTEM.md로 재료 시스템 상세 문서화 (재료 조합, 연구 기반 발견, 엔티티 연동), UI_COMPONENTS/UI_SYSTEM.md로 UI 시스템 상세 문서화 (맵 렌더링, 통계 패널, 로그 패널, 통합 패널), QUICK_REFERENCE.md로 빠른 참조 가이드 제공 (파일 매핑, 파라미터 설정, 디버깅 가이드, 개발 팁), 모든 시스템의 작동 방식과 코드 위치를 명확히 문서화하여 개발 효율성 대폭 향상
81. **파벌 시스템 인구 계산 및 엔티티 연동 개선**: 파벌 인구 계산 방식을 생존한 엔티티만 계산하도록 수정, 엔티티 사망 시 파벌에서 자동 제거 기능 추가 (removeEntity에서 factionSystem.removeMemberFromFaction 호출), 사망한 멤버 자동 제거 메서드 추가 (removeDeadMembers), 파벌 전투 시스템에서 엔티티의 전투 스킬과 스탯(힘, 민첩)을 고려한 전투력 계산 구현, 파벌 자원 생산을 엔티티 스킬 기반으로 변경 (수집 스킬→식량, 제작 스킬→도구, 건설 스킬→무기), 파벌 경제력 계산에 거래 스킬 반영, 영토 크기에 따른 자원 보너스 시스템 추가, 엔티티의 속성과 스킬이 파벌의 흥망성쇠에 직접적으로 영향을 주도록 시스템 개선

### 다음 단계
- Web Worker 마이그레이션
- 성능 최적화
- UI/UX 개선
- 밸런싱 패스

### 기술적 세부사항
- **성능**: 현재 24개 엔티티로 기본 테스트
- **렌더링**: Canvas 2D 사용, 60fps 목표
- **아키텍처**: 순수 로직(core/)과 UI(components/) 분리
- **타입 안전성**: TypeScript로 모든 핵심 타입 정의

### 해결된 문제들
- `yield` 예약어 충돌 해결 (yieldAmount로 변경)
- 기본 폴더 구조 생성
- 의존성 설치 완료
- 개발 서버 실행 가능

--- 